<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <!-- Font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">

    <!-- Style -->
    <link rel="stylesheet" href="style.css">

    <!-- Include stylesheet -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <!-- Include the Quill library -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>


</head>




<body>

    <div>
        <!-- Create the editor container -->
        <div id="editor">
            <p>Hello World!</p>
            <p>Some initial <strong>bold</strong> text</p>
            <p><br></p>
        </div>
    </div>


    <div class="p-3 text-white bg-dark" style="width: 300px;">

        <div class="h3">
            <i class="fa-solid fa-note-sticky me-2"></i>
            Sticky Notes
        </div>
        <hr>
        <div class="dropdown">
            <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
                id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
                <img src="https://media-exp1.licdn.com/dms/image/C4E03AQEe2RBi05Zzag/profile-displayphoto-shrink_800_800/0/1643752979896?e=1660780800&v=beta&t=vBPCGg_39ShIjgVXItLBqdt-r7bKhGPT_T38uGLrxm0"
                    alt="" width="32" height="32" class="rounded-circle me-2">
                <strong>Amira Chehaibi</strong>
            </a>
            <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
                <li><a class="dropdown-item" href="#">New project...</a></li>
                <li><a class="dropdown-item" href="#">Settings</a></li>
                <li><a class="dropdown-item" href="#">Profile</a></li>
                <li>
                    <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item" href="#">Sign out</a></li>
            </ul>
        </div>
        <hr>



        <h5>
            <a href="#" class="text-decoration-none text-white" onclick="add_note()">
                <i class="fa-solid fa-circle-plus me-2"></i> Add note
            </a>
        </h5>


    </div>

    <ul id="board">

        <!-- <div id="0" onclick="give_attention(this.id);" class="sticky_note" style="top:300px; left: 300px">
            <div id="0_header" class="sticky_note_header" style="background-color: pink;pull-right">
                <div class="float-md-start m-1">
                    <i style="cursor:pointer" onclick="add_note()" class="fa-solid fa-plus"></i>
                </div>
                <div class="float-md-end m-1">
                    <i style="cursor:pointer" class="me-3 fa-solid fa-ellipsis"></i>
                    <i style="cursor:pointer" onclick="remove_note('0')" class=" fa-solid fa-xmark"></i>
                </div>
            </div>



            <textarea>0 This is a sticky note you can type and edit.</textarea>
            <div class="action">
                <div class="colors">
                    <div class="note-yellow"></div>
                    <div class="note-green"></div>
                    <div class="note-levendor"></div>
                    <div class="note-orange"></div>
                </div>
                <button type="button" class="btn btn-edit"><i class="fa fa-palette"></i></button>
                <button type="button" class="btn btn-del"><i class="fa fa-trash"></i></button>
            </div>


        </div> -->

    </ul>

</body>

</html>

<script>

    function remove_note(id) {
        console.log('remove_note');
        var elem = document.getElementById(id);
        elem.parentNode.removeChild(elem);
    }

    function give_attention(id) {
        console.log('id: ', id)
        const list = document.getElementById("board");
        var elem = document.getElementById(id)
        if (elem) {
            list.appendChild(elem);
            elem.children[1].focus()
        }
    }

    var counter = 0;

    add_note()

    function add_note() {
        counter = counter + 1; // 0+ 1 =1

        const colors = {
            'purple': { 'light': '#BD87C7', 'dark': '#9416AD' },
            'pink': { 'light': '#EA94BA', 'dark': '#F84097' },
            'blue': { 'light': '#A7CBF3', 'dark': '#3F9BDE' },
            'yellow': { 'light': '#F4D32B', 'dark': '#FDCB15' },
            'green': { 'light': '#CAE057', 'dark': '#92D050' },
            'turquoise': { 'light': '#68C7C0', 'dark': '#10A98B' },
        }
        var keys = Object.keys(colors);
        var random = colors[keys[keys.length * Math.random() << 0]];

        console.log('random: ', random.light)


        // console.log(random, months[random]);


        var random_color = Math.floor(Math.random() * 16777215).toString(16);

        var sticky_note_template = `
            <div id="${counter}" onclick="give_attention(this.id);" class="sticky_note" style="top:200px; left: 200px">
                <div id="${counter}_header" class="sticky_note_header" style="background-color: ${random.dark};">

                    <div class="float-md-start m-1">
                        <i style="cursor:pointer" onclick="add_note()" class="fa-solid fa-plus"></i>
                    </div>
                    <div class="float-md-end m-1">
                        <i style="cursor:pointer" class="me-3 fa-solid fa-ellipsis"></i>
                        <i style="cursor:pointer" onclick="remove_note(${counter})" class=" fa-solid fa-xmark"></i>
                    </div>

                </div>
                <textarea style="background: linear-gradient(${random.light}, #f7e98d);">${counter} Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean nulla nisl, luctus vehicula nisi eget, ullamcorper pharetra dolor. Etiam vel sem sed turpis pellentesque accumsan. Cras at aliquet lectus. Quisque ut purus eu velit posuere ultricies. Nunc vulputate ligula ut velit iaculis, finibus cursus est porttitor. Etiam posuere elementum quam id finibus. Cras placerat ut mauris ut fringilla. Curabitur eget arcu augue.

Ut fringilla varius nulla, sed venenatis diam mattis ac. Cras tristique eros id quam aliquam luctus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Sed sit amet nisl ut nibh euismod auctor. Donec dignissim, magna vitae rutrum semper, elit orci volutpat velit, in eleifend neque ligula quis justo. Nam dictum augue non quam ullamcorper luctus. Ut sit amet elit ac purus viverra posuere.



                </textarea>
            </div>
        `;

        var wrapper = document.createElement('li');
        wrapper.innerHTML = sticky_note_template;
        document.getElementById("board").appendChild(wrapper);

        dragElement(counter);
    }

    dragElement(0)

    function dragElement(id) {

        var element = document.getElementById(id)

        console.log('dragElement')
        console.log('element: ', element)
        var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        if (document.getElementById(element.id + "_header")) {
            /* if present, the _header is where you move the DIV from:*/
            document.getElementById(element.id + "_header").onmousedown = dragMouseDown;
        } else {
            /* otherwise, move the DIV from anywhere inside the DIV:*/
            element.onmousedown = dragMouseDown;
        }

        function dragMouseDown(e) {
            e = e || window.event;
            e.preventDefault();
            // get the mouse cursor position at startup:
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            // call a function whenever the cursor moves:
            document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();
            // calculate the new cursor position:
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            // set the element's new position:
            element.style.top = (element.offsetTop - pos2) + "px";
            element.style.left = (element.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
            /* stop moving when mouse button is released:*/
            document.onmouseup = null;
            document.onmousemove = null;
        }
    }





</script>


<!-- Initialize Quill editor -->
<script>
    var quill = new Quill('#editor', {
        theme: 'snow'
    });
</script>